# Quest 10. 인증의 이해

## Introduction

- 이번 퀘스트에서는 웹에서의 인증에 관해 알아보겠습니다.

## Topics

- Cookie
- Session
- JWT

## Resources

- [MDN - HTTP 쿠키](https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies)
- [Cookies and Sessions](https://web.stanford.edu/~ouster/cgi-bin/cs142-fall10/lecture.php?topic=cookie)
- [JWT](https://jwt.io/)

## Checklist

- 쿠키란 무엇일까요?
  - 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각입니다. 브라우저는 그 데이터 조각들을 저장해놓았다가, 동일한 서버에 재 요청시 저장된 데이터를 함께 전송합니다.
  - HTTP 통신은 Stateless 하기에, 이를 극복하기 위해 사용됩니다.

* 쿠키는 어떤 식으로 동작하나요?
  - 클라이언트가 서베에게 페이지 정보를 요청.
  - 서버는 클라이언트에 대한 쿠키 생성 후, HTTP 응답 헤더에 쿠키를 포함하여 응답.
  - 생성한 쿠키에 정보를 담아 HTTP 화면을 돌려줄 때, 같이 클라이언트에게 제공한다.
  - 넘겨받은 쿠키는 클라이언트 브라우저에 저장 되어있다가, 서버 요청 시에 함께 전송한다.
  - 동일 사이트 재 방문시, 클라이언트의 PC에 해당 쿠키가 남아있는 경우, 쿠키와 함께 서버에 요청을 한다.
* 쿠키는 어떤 식으로 서버와 클라이언트 사이에 정보를 주고받나요?
  - setCookie를 이용하여 저장해야할 내용을 쿠키에 저장.

- 웹 어플리케이션의 세션이란 무엇일까요?
  - 브라우저가 종료되기 전까지 클라이언트의 요청을 유지하게 해주는 기술입니다.
- 세션의 동작방식

  - 클라이언트가 서버에 로그인을 요청합니다.
  - 서버는 클라이어트의 로그인 요청의 유효성을 확인하고 유니크한 ID를 sessionId로 저장합니다.
  - 서버가 응답할 때, 응답헤더에 `set-cookie: sessionid:a1x2fjz` 를 추가하여 응답합니다.
  - 클라이언트는 이후 서버에 요청할 때 전달받은 session 쿠리를 자동으로 헤더에 추가하여 요청합니다.
  - 서버에서는 요청 헤더의 sessionId 값으로 저장된 세션을 차장보고 유효한지 확인 후 요청을 처리하고 응답합니다.
  - 세션의 내용은 서버에 저장되기 때문에 계속하여 늘어날 경우 서버에 부하가 발생합니다.

- 쿠키와 세션의 차이점
  - 저장 위치
    - 쿠키는 로컬에, 세션은 로컬과 서버에 저장됩니다.
  - 보안
    - 쿠키는 탈취와 변조가 가능하지만, 세션은 ID값만 가지고 있고 서버에도 저장이 되어있기 때문에 상대적으로 안전합니다.
  - 생명주기
    - 쿠키는 브라우저를 종료해도 파일로 남아있지만, 세션은 브라우저 종료시 세션을 삭제합니다.
  - 속도
    - 쿠키는 파일에서 읽기 때문에 상대적으로 빠르고, 세션은 요청마다 서버에서 처리를 해야하기 때문에 비교적 느립니다.
- JWT란 무엇인가요?
  - JSON Web Token의 약자로, 토큰처럼 사용할 수 있도록 JSON을 인코딩하고 서명한 것을 의미합니다.
  -
  - JWT 토큰은 어디에 저장되고 어떻게 서버와 교환되나요?
- 세션에 비해 JWT가 가지는 장점은 무엇인가요? 또 JWT에 비해 세션이 가지는 장점은 무엇인가요?
  - 장점
    - 자체 포함 & 무상태
      - 토큰 내부에 전달할 내용이 있고, 서명으로 변조여부를 확인할 수 있기 때문에 JWT에 대한 상태를 서버가 별도로 가지고 있지 않아도 됩니다.
    - 서버에서 별도의 인증 작업을 거치지 않아도 됩니다.
    - JWT에 만료시간을 넣어둠으로써 스스로 사라지게 할 수 있습니다.
  - 단점
    - 서버가 가진 통제력이 낮고, 발급된 JWT를 무력화 하는 것이 어렵습니다.

## Quest

- 이번에는 메모장 시스템에 로그인 기능을 넣고자 합니다.
  - 사용자는 딱 세 명만 존재한다고 가정하고, 아이디와 비밀번호, 사용자의 닉네임은 하드코딩해도 무방합니다.
  - 로그인했을 때 해당 사용자가 이전에 작업했던 탭들과 마지막으로 활성화된 탭 등의 상태가 로딩 되어야 합니다.
  - 세션을 이용한 버전과, JWT를 이용한 버전 두 가지를 만들어 보세요!
    - 세션을 이용할 경우 세션은 서버의 메모리나 파일에 저장하면 됩니다.

## Advanced

- Web Authentication API(WebAuthn)은 무엇인가요?
